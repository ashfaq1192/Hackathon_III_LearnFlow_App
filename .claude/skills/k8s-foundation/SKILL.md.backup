---
name: k8s-foundation
description: |
  Kubernetes cluster operations and health checks. This skill should be used
  when deploying applications to Kubernetes, checking cluster health, managing
  resources, or troubleshooting deployments. Provides foundational K8s operations
  that other infrastructure skills depend on.
---

# Kubernetes Foundation

Core Kubernetes operations for cluster management, health checks, and resource deployment.

## When to Use

- Check Kubernetes cluster connectivity and health
- Create or verify namespaces for application deployments
- Deploy applications using kubectl apply
- Check pod status, logs, and troubleshoot issues
- Verify resource deployments (deployments, services, configmaps, secrets)
- Execute commands in running pods for debugging

## Prerequisites

- Kubernetes cluster running (Minikube, Kind, or cloud cluster)
- `kubectl` installed and configured
- Cluster context set to target cluster

## Instructions

### 1. Check Cluster Health
```bash
python scripts/cluster_health.py
```
Verifies cluster connectivity, node status, and core components.

### 2. Manage Namespaces
```bash
python scripts/namespace.py --name <namespace> [--create]
```
Creates namespace if it doesn't exist, or verifies existing namespace.

### 3. Deploy Resources
```bash
python scripts/deploy.py --file <manifest.yaml> --namespace <namespace>
```
Applies Kubernetes manifests with validation.

### 4. Check Resource Status
```bash
python scripts/status.py --namespace <namespace> --resource <type>
```
Checks status of deployments, pods, services, etc.

### 5. Get Pod Logs
```bash
python scripts/logs.py --pod <pod-name> --namespace <namespace> [--tail 50]
```
Retrieves logs from running or failed pods.

### 6. Troubleshoot Deployments
```bash
python scripts/troubleshoot.py --namespace <namespace>
```
Automated troubleshooting of common deployment issues.

## Validation

After operations, verify:
- [ ] Cluster is accessible: `kubectl cluster-info`
- [ ] Namespaces exist and are Active
- [ ] Pods are Running or Completed (check with `status.py`)
- [ ] Services have endpoints
- [ ] No CrashLoopBackOff or ImagePullBackOff errors

## Common Issues

| Issue | Script | Solution |
|-------|--------|----------|
| Cluster not accessible | `cluster_health.py` | Check kubectl config, cluster running |
| Pods pending | `troubleshoot.py` | Check resource quotas, node capacity |
| Pods failing | `logs.py` | Check pod logs for errors |
| Service not routing | `status.py` | Verify service selectors match pod labels |

## See Also

- `references/k8s-best-practices.md` - Kubernetes deployment best practices
- `references/troubleshooting-guide.md` - Detailed troubleshooting workflows
- `references/resource-patterns.md` - Common K8s resource patterns
